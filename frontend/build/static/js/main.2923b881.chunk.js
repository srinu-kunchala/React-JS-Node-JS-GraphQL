(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(t,e,n){t.exports=n(56)},41:function(t,e,n){},56:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),r=n(20),o=n.n(r),c=n(12),s=(n(41),n(2)),u=n(3),d=n(5),l=n(4),p=n(6),h=n(11),m=n(30),f=new(function(){function t(){Object(s.a)(this,t),this.auth0=new m.a.WebAuth({domain:"dev-or-d8gpn.auth0.com",audience:"https://dev-or-d8gpn.auth0.com/userinfo",clientID:"rYvvdsdd3hypHqA2VM2DCj35NHbwB0b5",redirectUri:"http://localhost:3000/callback",responseType:"id_token",scope:"openid profile email"}),this.getProfile=this.getProfile.bind(this),this.handleAuthentication=this.handleAuthentication.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this),this.signIn=this.signIn.bind(this),this.signOut=this.signOut.bind(this);var e=document.cookie.match("(^|;) ?expiresAt=([^;]*)(;|$)");e&&(this.expiresAt=e[2])}return Object(u.a)(t,[{key:"getProfile",value:function(){return this.profile}},{key:"getIdToken",value:function(){return this.idToken}},{key:"isAuthenticated",value:function(){return(new Date).getTime()<this.expiresAt}},{key:"signIn",value:function(){this.auth0.authorize()}},{key:"handleAuthentication",value:function(){var t=this;return new Promise(function(e,n){t.auth0.parseHash(function(a,i){return a?n(a):i&&i.idToken?(t.idToken=i.idToken,t.profile=i.idTokenPayload,t.expiresAt=1e3*i.idTokenPayload.exp,void e()):n(a)})})}},{key:"signOut",value:function(){return this.idToken=null,this.profile=null,this.expiresAt=null,this.auth0.logout()}}]),t}()),g=n(31),v=n.n(g),y="http://localhost:3001/graphql",b=n(13);var k=function(t){function e(){var t;return Object(s.a)(this,e),(t=Object(d.a)(this,Object(l.a)(e).call(this))).state={data:null},t}return Object(p.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.departmentsInfo()}},{key:"componentWillReceiveProps",value:function(){this.departmentsInfo()}},{key:"departmentsInfo",value:function(){var t=this;void 0!==this.props.departments.data&&null!==this.props.departments.data&&this.setState({data:this.props.departments.data});this.state.data||fetch(y,{method:"POST",body:JSON.stringify({query:"\n                    query{\n                        departments{\n                            _id\n                            name\n                            description\n                        }\n                    }\n                "}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.getIdToken())}}).then(function(t){return t.json()}).then(function(e){t.props.getDepartments({data:e.data.departments})}).catch(function(t){throw t})}},{key:"render",value:function(){var t=[];return void 0!==this.props.departments.data&&(t=this.props.departments.data),i.a.createElement("div",{className:"departmentlist"},i.a.createElement("ul",null," ",t.map(function(t,e){return i.a.createElement("li",{key:e,id:t._id},i.a.createElement(c.Link,{to:"/categories/".concat(t.name)},t.name))})))}}]),e}(a.Component),O=Object(b.b)(function(t){return{departments:t.department.departments}},function(t){return{getDepartments:function(e){t(function(t){return{type:"GET_DEPARTMENTS",payload:t}}(e))}}})(k),j=function(t){function e(){return Object(s.a)(this,e),Object(d.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(u.a)(e,[{key:"signOut",value:function(t,e,n,a){f.signOut(),document.cookie=n+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;",document.cookie=a+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;",e.props.history.replace("/")}},{key:"getCookie",value:function(t){for(var e=t+"=",n=decodeURIComponent(document.cookie).split(";"),a=0;a<n.length;a++){for(var i=n[a];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(e))return i.substring(e.length,i.length)}return null}},{key:"render",value:function(){var t,e,n=this;return(t=this.getCookie("idtoken"))&&(e=v()(t).name),i.a.createElement("div",null,i.a.createElement("nav",{className:"navbar navbar-dark bg-primary fixed-top"},i.a.createElement(c.Link,{className:"navbar-brand",to:"/"},"Home"),i.a.createElement(O,null),!f.isAuthenticated()&&i.a.createElement("button",{className:"btn btn-dark",onClick:f.signIn},"Sign In"),f.isAuthenticated()&&i.a.createElement("div",null,i.a.createElement("label",{className:"mr-2 text-white"},e),i.a.createElement("button",{className:"btn btn-dark",onClick:function(t){return n.signOut(t,n,"idtoken","expiresAt")}},"Sign Out"))))}}]),e}(a.Component),E=Object(h.k)(j),T=n(24),_=n.n(T),C=n(34),I=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(d.a)(this,Object(l.a)(e).call(this,t))).state={},n}return Object(p.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){var t=Object(C.a)(_.a.mark(function t(){var e,n=this;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.handleAuthentication();case 2:e={query:'\n        mutation{\n          createUser(userInput:{name:"'.concat(f.getProfile().name,'", email:"').concat(f.getProfile().email,'"}){            \n            name\n            email\n        }\n      }')},fetch(y,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.getIdToken())}}).then(function(t){return t.json()}).then(function(t){var e=new Date;e.setTime(e.getTime()+864e5);var a="expires="+e.toUTCString();document.cookie="idtoken="+f.getIdToken()+";"+a+";path=/";var i=f.expiresAt;document.cookie="expiresAt="+i+";"+a+";path=/",n.props.history.replace("/")});case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("p",null,"Loading profile..."))}}]),e}(a.Component),w=Object(h.k)(I);var A=n(25),S=n(58),D=function(t){function e(){var t;return Object(s.a)(this,e),(t=Object(d.a)(this,Object(l.a)(e).call(this))).state={data:null},t}return Object(p.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.productsData()}},{key:"componentWillReceiveProps",value:function(t){this.productsData(t)}},{key:"productsData",value:function(t){var e=this,n=null;if(void 0!==(n=t||this.props).products.data&&null!==n.products.data)if(this.state.data)if(n.products.data===this.state.data){var a=JSON.stringify(n.cat_ids),i={query:"\n                        query{\n                            products(cat_id:".concat(a,"){                  \n                                _id\n                                name\n                                description\n                                price\n                                discounted_price\n                                image\n                                image_2\n                                thumbnail\n                            }\n                        }\n                    ")};fetch(y,{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.getIdToken())}}).then(function(t){return t.json()}).then(function(t){e.props.getProducts({data:t.data.products})}).catch(function(t){throw t})}else this.setState({data:n.products.data,catID:null});else this.setState({data:n.products.data,catID:null});else{var r=JSON.stringify(n.cat_ids),o={query:"\n            query{\n                products(cat_id:".concat(r,"){                  \n                    _id\n                    name\n                    description\n                    price\n                    discounted_price\n                    image\n                    image_2\n                    thumbnail\n                }\n            }\n        ")};fetch(y,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.getIdToken())}}).then(function(t){return t.json()}).then(function(t){e.props.getProducts({data:t.data.products})}).catch(function(t){throw t})}}},{key:"addtoCart",value:function(t){console.log(this.props)}},{key:"render",value:function(){var t=this,e=[];return void 0!==this.props.products.data&&(e=this.props.products.data),i.a.createElement("div",{className:"row"},e.map(function(e,n){return i.a.createElement("div",{key:n,className:"product_single_block col-md-6 col-lg-3 item pb-3"},i.a.createElement(A.LinkContainer,{to:"/product/"+e._id+"/"+e.name},i.a.createElement("a",null,i.a.createElement("img",{src:"https://reactshop.amoha.co:5000/images/product_images/"+e.image,alt:"https://reactshop.amoha.co:5000/images/product_images/"+e.image}))),i.a.createElement(A.LinkContainer,{to:"/product/"+e._id+"/"+e.name},i.a.createElement("a",null,i.a.createElement("h5",{className:"black pt-3"},e.name)," ")),i.a.createElement("h3",{className:"red"},"$",void 0!==e.discounted_price&&"0.00"!==e.discounted_price?e.discounted_price:e.price),i.a.createElement(S.a,{onClick:t.addtoCart.bind(t)},"Add to cart"))}))}}]),e}(a.Component),N=Object(b.b)(function(t){return{products:t.products.products}},function(t){return{getProducts:function(e){t(function(t){return{type:"GET_PRODUCTS",payload:t}}(e))}}})(D),P=function(t){function e(){var t;return Object(s.a)(this,e),(t=Object(d.a)(this,Object(l.a)(e).call(this))).state={data:null,catID:null},t}return Object(p.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.categoriesInfo()}},{key:"componentWillReceiveProps",value:function(t){this.categoriesInfo(t)}},{key:"categoriesInfo",value:function(t){var e=null;if(void 0!==(e=t||this.props).categories.data&&null!==e.categories.data)if(this.state.data)if(e.categories.data===this.state.data){var n=e.match.params.departmentName,a=e.departments.data.find(function(t){return t.name===n}),i={query:'\n                        query{\n                            categories(department_id:"'.concat(a._id,'"){                  \n                                _id\n                                name\n                                description\n                            }\n                        }\n                    ')};fetch(y,{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.getIdToken())}}).then(function(t){return t.json()}).then(function(t){e.getDepartmentCategories({data:t.data.categories})}).catch(function(t){throw t})}else this.setState({data:e.categories.data,catID:null});else this.setState({data:e.categories.data,catID:null});else{var r=e.match.params.departmentName,o=e.departments.data.find(function(t){return t.name===r}),c={query:'\n                query{\n                    categories(department_id:"'.concat(o._id,'"){                  \n                        _id\n                        name\n                        description\n                    }\n                }\n            ')};fetch(y,{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.getIdToken())}}).then(function(t){return t.json()}).then(function(t){e.getDepartmentCategories({data:t.data.categories})}).catch(function(t){throw t})}}},{key:"categoryClick",value:function(t){this.setState({catID:t.currentTarget.id})}},{key:"render",value:function(){var t=this,e=[],n=this.props.match.params.departmentName;this.props.departments.data.find(function(t){return t.name===n});void 0!==this.props.categories.data&&(e=this.props.categories.data);var a=[];return i.a.createElement("div",{className:"categoriesList container"},i.a.createElement("div",{className:"row pt-5"},i.a.createElement("h2",null,n),i.a.createElement("div",{style:{float:"left",marginTop:"76px",marginLeft:"-122px",paddingBottom:"10px"}},e.map(function(e,n){return a.push(e._id),i.a.createElement("div",{key:n,id:e._id,onClick:t.categoryClick.bind(t)},e.name)})),i.a.createElement(N,{cat_ids:null!==this.state.catID?this.state.catID:a})))}}]),e}(a.Component),x=Object(b.b)(function(t){return{categories:t.category.categories,departments:t.department.departments}},function(t){return{getDepartmentCategories:function(e){t(function(t){return{type:"GET_CATEGORIES",payload:t}}(e))}}})(P),q=function(t){function e(){return Object(s.a)(this,e),Object(d.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(E,null),i.a.createElement(h.d,{path:"/categories/:departmentName",component:x}),i.a.createElement(h.d,{exact:!0,path:"/callback",component:w}))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=n(17),B=n(14),R=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{departments:[]},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GET_DEPARTMENTS":t=Object(B.a)({},t,{departments:e.payload});default:return t}},G=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{categories:[]},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GET_CATEGORIES":t=Object(B.a)({},t,{categories:e.payload});default:return t}},M=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GET_PRODUCTS":t=Object(B.a)({},t,{products:e.payload});default:return t}},z=Object(J.c)(Object(J.b)({department:R,category:G,products:M}),{});o.a.render(i.a.createElement(b.a,{store:z},i.a.createElement(c.BrowserRouter,null,i.a.createElement(q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[36,1,2]]]);
//# sourceMappingURL=main.2923b881.chunk.js.map